(this["webpackJsonpreact-xstate-demo"]=this["webpackJsonpreact-xstate-demo"]||[]).push([[0],{39:function(e,t,n){e.exports=n(51)},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var r=n(17),a=n(36),c=n(2),o=n.n(c),s=n(21),i=n.n(s),l=n(27),m=n(26),u=n(3),d=Object(c.createContext)(),f=function(e){return"https://hacker-news.firebaseio.com/v0/item/".concat(e,".json")},h=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.hnpwa.com/v0/news.json?page=1").then((function(e){return e.json()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(f(t)).then((function(e){return e.json()}));case 2:return n=e.sent,r=n.kids,e.next=6,Promise.all(r.map((function(e){return f(e)})).map((function(e){return fetch(e).then((function(e){return e.json()}))})));case 6:return a=e.sent,e.abrupt("return",{story:n,comments:a});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=Object(m.a)({id:"app",initial:"init",context:{story:void 0,stories:[],comments:[],error:void 0},states:{init:{},list:{states:{loading:{invoke:{id:"fetchStories",src:h,onDone:{target:"success",actions:Object(u.b)({stories:function(e,t){return t.data}})},onError:{target:"fail",actions:Object(u.b)({error:function(e,t){return t.data}})}}},success:{},fail:{}}},comments:{states:{loading:{invoke:{id:"fetchComments",src:function(e,t){return E(t.storyId)},onDone:{target:"success",actions:Object(u.b)({story:function(e,t){return t.data.story},comments:function(e,t){return t.data.comments}})},onError:{target:"fail",actions:Object(u.b)({error:function(e,t){return t.data}})}}},success:{},fail:{}}}},on:{LOAD_STORIES:{target:"list.loading"},LOAD_COMMENTS:{target:"comments.loading"}}}),v=n(24);var g=function(){var e=Object(c.useContext)(d),t=Object(r.a)(e,2),n=t[0],a=t[1],s=n.context,i=s.error,l=s.stories;return Object(c.useEffect)((function(){a("LOAD_STORIES")}),[]),o.a.createElement("div",{style:{padding:20}},n.matches("list.loading")&&o.a.createElement("h2",null,"Loading..."),n.matches("list.fail")&&o.a.createElement("div",{style:{color:"red"}},"Error loading stories: ",i.toString()),o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{display:"flex"}},l&&l.length>0&&o.a.createElement("div",{className:""},l.map((function(e,t){return o.a.createElement(c.Fragment,{key:"story_"+e.id},o.a.createElement("div",{className:"story-item-container"},o.a.createElement(v.b,{to:"/comments/"+e.id},o.a.createElement("h4",null,e.title)),o.a.createElement("h5",null,"Comments: ",e.comments_count,o.a.createElement("b",{style:{marginLeft:"100px"}},"By: ",e.user))),o.a.createElement("hr",null))}))))))};var y=function(e){var t=Object(c.useContext)(d),n=Object(r.a)(t,2),a=n[0],s=n[1],i=a.context,l=i.error,m=i.comments,u=i.story;return Object(c.useEffect)((function(){s("LOAD_COMMENTS",{storyId:e.match.params.storyId})}),[]),o.a.createElement("div",{style:{padding:20}},a.matches("comments.loading")&&o.a.createElement("h2",null,"Loading..."),a.matches("comments.fail")&&o.a.createElement("div",{style:{color:"red"}},"Error loading stories: ",l.toString()),a.matches("comments.success")&&o.a.createElement("div",{className:"story-item-container"},o.a.createElement("button",{onClick:function(){return e.history.goBack()}},"Go Back"),o.a.createElement("br",null),o.a.createElement("h2",null,u.title),o.a.createElement("div",null,o.a.createElement("h3",null,"Comments:"),o.a.createElement("br",null),m.map((function(e,t){return e.deleted?"":o.a.createElement(c.Fragment,{key:"comment_"+e.id},o.a.createElement("div",null,o.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.text}}),o.a.createElement("b",{style:{color:"green"}},"By: ",e.by)),o.a.createElement("hr",null))})))))},b=n(7);var O=function(){var e=Object(a.useMachine)(p),t=Object(r.a)(e,2),n=t[0],c=t[1];return o.a.createElement(d.Provider,{value:[n,c]},o.a.createElement(v.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(b.c,null,o.a.createElement(b.a,{path:"/comments/:storyId",component:y}),o.a.createElement(b.a,{path:"/",component:g})))))},j=n(38),x=n.n(j);n(50),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));x.a.render(o.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.4ff55503.chunk.js.map